# Azure Database for PostgreSQL Configuration
# Copy to .env and update with your Azure Database details

# Domain Configuration
DOMAIN=yourdomain.com
LETSENCRYPT_EMAIL=admin@yourdomain.com

# Azure Database for PostgreSQL Configuration
# Format: postgresql://username@servername:password@servername.postgres.database.azure.com:5432/database?sslmode=require
DATABASE_URL=postgresql://myadmin@asset-management-server:your_password@asset-management-server.postgres.database.azure.com:5432/asset_management?sslmode=require

# Alternative individual components (if not using DATABASE_URL)
PGHOST=asset-management-server.postgres.database.azure.com
PGPORT=5432
PGDATABASE=asset_management
PGUSER=myadmin@asset-management-server
PGPASSWORD=your_secure_password
PGSSLMODE=require

# Security Configuration
SESSION_SECRET=your_secure_random_session_secret_min_32_characters
NODE_TLS_REJECT_UNAUTHORIZED=1

# Azure Database Specific Settings
# 1. Server Configuration:
#    - Server name: asset-management-server
#    - Admin username: myadmin
#    - PostgreSQL version: 15
#    - Compute tier: General Purpose
#    - vCores: 2
#    - Storage: 512 GB
#    - Backup retention: 7 days
#    - High availability: Disabled (enable for production)

# 2. Connection Security:
#    - SSL enforcement: Enabled
#    - Minimum TLS version: 1.2
#    - Allow access to Azure services: Disabled
#    - Add your server IP to firewall rules

# 3. Performance Recommendations:
#    - Enable Query Store
#    - Enable Automatic tuning
#    - Set maintenance window: Sun 2:00 AM - 6:00 AM
#    - Enable Performance recommendations

# 4. Firewall Rules Configuration:
#    az postgres server firewall-rule create \
#      --resource-group your-resource-group \
#      --server-name asset-management-server \
#      --name AllowYourServer \
#      --start-ip-address YOUR_SERVER_IP \
#      --end-ip-address YOUR_SERVER_IP

# 5. Connection Pooling (Optional):
#    - Enable PgBouncer
#    - Default pool size: 25
#    - Max client connections: 5000

# Deployment Command:
# docker compose -f docker-compose.ssl-external-db.yml up -d --build