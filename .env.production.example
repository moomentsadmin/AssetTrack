# Production Environment Configuration
# Copy this to .env and configure for your deployment

# =============================================================================
# DEPLOYMENT MODE
# =============================================================================
# Set to 'true' to use external database (DigitalOcean, AWS RDS, etc.)
# Set to 'false' or omit to use local containerized PostgreSQL
USE_EXTERNAL_DB=false

# =============================================================================
# DOMAIN & SSL CONFIGURATION (REQUIRED)
# =============================================================================
DOMAIN=yourdomain.com
LETSENCRYPT_EMAIL=admin@yourdomain.com

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================

# --- Option 1: External Managed Database (DigitalOcean, AWS RDS, Neon, etc.) ---
# If USE_EXTERNAL_DB=true, provide the full connection string:
# DATABASE_URL=postgresql://user:password@host:port/database?sslmode=require

# DigitalOcean Example:
# DATABASE_URL=postgresql://doadmin:password@db-postgresql-nyc1-12345.ondigitalocean.com:25060/defaultdb?sslmode=require

# AWS RDS Example:
# DATABASE_URL=postgresql://postgres:password@mydb.abc123.us-east-1.rds.amazonaws.com:5432/assetdb?sslmode=require

# Neon Example:
# DATABASE_URL=postgresql://user:password@ep-cool-darkness-123456.us-east-2.aws.neon.tech/neondb?sslmode=require

# --- Option 2: Local PostgreSQL (Containerized) ---
# If USE_EXTERNAL_DB=false or omitted, configure these:
PGUSER=asset_user
PGPASSWORD=change_this_to_secure_password
PGDATABASE=asset_management

# =============================================================================
# APPLICATION SECURITY
# =============================================================================
# Generate secure random string (min 32 characters):
# openssl rand -base64 32
SESSION_SECRET=change_this_to_secure_random_string_min_32_chars

# =============================================================================
# TRAEFIK DASHBOARD (Optional)
# =============================================================================
# Access at: https://traefik.yourdomain.com
# Generate password hash: htpasswd -nB admin
# Remember to escape $ as $$ in the hash
TRAEFIK_DASHBOARD_AUTH=admin:$$2y$$05$$kF5Z5z5Z5z5z5Z5z5z5z5OqGqGqGqGqGqGqGqGqGqGqGqGqGqG

# =============================================================================
# SSL/TLS FOR EXTERNAL DATABASES
# =============================================================================
# For managed databases with self-signed certificates (DigitalOcean, etc.):
# Set to 0 to disable certificate verification (required for most managed DBs)
# Set to 1 for strict SSL verification (only if you have proper CA certs)
NODE_TLS_REJECT_UNAUTHORIZED=0

# =============================================================================
# DEPLOYMENT INSTRUCTIONS
# =============================================================================
#
# 1. LOCAL DATABASE DEPLOYMENT:
#    - Set USE_EXTERNAL_DB=false (or omit it)
#    - Configure PGUSER, PGPASSWORD, PGDATABASE
#    - Deploy:
#      docker compose -f docker-compose.production.yml --profile local-db up -d --build
#
# 2. EXTERNAL DATABASE DEPLOYMENT (DigitalOcean, AWS RDS, etc.):
#    - Set USE_EXTERNAL_DB=true
#    - Set DATABASE_URL with your external database connection string
#    - Ensure NODE_TLS_REJECT_UNAUTHORIZED=0 (for self-signed certs)
#    - Whitelist your server IP in database provider dashboard
#    - Deploy:
#      docker compose -f docker-compose.production.yml up -d --build
#
# 3. DNS SETUP (Required for SSL):
#    - Point A record @ to your server IP
#    - Point A record www to your server IP
#    - Point A record traefik to your server IP (for dashboard)
#
# 4. FIREWALL SETUP:
#    - Open port 80 (HTTP - for Let's Encrypt)
#    - Open port 443 (HTTPS - for secure traffic)
#
# 5. FIRST TIME SETUP:
#    - Visit https://yourdomain.com
#    - Create admin account on setup page
#    - Login and configure system
#
# =============================================================================
